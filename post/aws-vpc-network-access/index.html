<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width"><script type=application/javascript src=https://sanchitdilipjain.github.io/js/theme-mode.js></script><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/frameworks.min.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/github.min.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/github-style.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/light.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/dark.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/syntax.css><title>Amazon VPC Network Access Analyzer 🔍 - Sanchit's blog</title>
<link rel=icon type=image/x-icon href=https://sanchitdilipjain.github.io/images/github.png><meta name=theme-color content="#1e2327"><meta name=description content="Never become so much of an expert that you stop gaining expertise. View life as a continuous learning experience."><meta name=robots content="noodp"><link rel=canonical href=https://sanchitdilipjain.github.io/post/aws-vpc-network-access/><meta name=twitter:card content="summary"><meta name=twitter:title content="Sanchit's Blog"><meta name=twitter:description content="Amazon VPC Network Access Analyzer Introduction
What is VPC Network Access Analyzer?
Network Access Analyzer is a feature that identifies unintended network access to your resources on AWS.
Understand, verify, and improve your network security posture: Network Access Analyzer helps you identify unintended network access relative to your security and compliance requirements, enabling you to improve your network security. Demonstrate compliance: You can use Network Access Analyzer to demonstrate that your network on AWS meets specific compliance requirements. Verify your network security posture: Network Access Analyzer lets you specify your network security requirements and identify potential network paths that do not meet your requirements. Why do you need a Network Access Analyzer?
"><meta name=twitter:site content="https://sanchitdilipjain.github.io/"><meta name=twitter:creator content="Sanchit Jain"><meta name=twitter:image content="https://sanchitdilipjain.github.io//images/preview.png"><meta property="og:type" content="article"><meta property="og:title" content="Sanchit's Blog"><meta property="og:description" content="Never become so much of an expert that you stop gaining expertise. View life as a continuous learning experience."><meta property="og:url" content="https://sanchitdilipjain.github.io/"><meta property="og:site_name" content="Sanchit's Blog"><meta property="og:image" content="https://sanchitdilipjain.github.io//images/preview.png"><meta property="og:image:type" content="image/png"><meta name=thumbnail content="https://sanchitdilipjain.github.io//images/preview.png"><meta name=author content="Sanchit Jain"><meta property="article:published_time" content="2023-01-02 12:00:00 +0000 UTC"></head><body><style>.height-limitation{max-height:300px;overflow-y:scroll}.loader{border:4px solid #f3f3f3;border-bottom:4px solid var(--color-fg-muted);border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite;margin:0 auto}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style><div style=position:relative><header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on"><div class="Header-item mobile-none" style=margin-top:-4px;margin-bottom:-4px><a class=Header-link href=https://sanchitdilipjain.github.io/><svg class="octicon" height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div><div class="Header-item d-md-none"><button class="Header-link btn-link js-details-target" type=button onclick='document.querySelector("#header-search").style.display=document.querySelector("#header-search").style.display=="none"?"block":"none"'><svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button></div><div style=display:none id=header-search class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex"><div class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"><div class=position-relative><form target=_blank action=https://www.google.com/search accept-charset=UTF-8 method=get autocomplete=off><label class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center"><input type=text class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" name=q placeholder=Search autocomplete=off>
<input type=hidden name=q value=site:https://sanchitdilipjain.github.io/><div class="js-jump-to-suggestions-container jump-to-suggestions overflow-hidden position-absolute"><div id=search-progress class="d-none color-bg-primary no-underline p-2" role=progress aria-selected=false><div class=loader></div></div><ul id=jump-to-results role=listbox class="Box border-0 p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container js-active-navigation-container height-limitation"></ul></div></label></form></div></div></div><div class="Header-item Header-item--full flex-justify-center d-md-none position-relative"><a class=Header-link href=https://sanchitdilipjain.github.io/><svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div><div class=Header-item style=margin-right:0><a href=javascript:void(0) class="Header-link no-select" onclick=switchTheme()><svg style="fill:var(--color-profile-color-modes-toggle-moon)" class="no-select" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.52208 7.71754c3.05612.0 5.53362-2.47748 5.53362-5.5336C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961 9.95801 1.07727 10.3495.771159 10.6474.99992c1.4679 1.12724 2.4141 2.90007 2.4141 4.89391.0 3.40575-2.7609 6.16667-6.16665 6.16667-2.94151.0-5.40199-2.0595-6.018122-4.81523C.794841 6.87902 1.23668 6.65289 1.55321 6.85451 2.41106 7.40095 3.4296 7.71754 4.52208 7.71754z"/></svg></a></div></header></div><div><main><div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4"><div class=px-0><div class="mb-3 d-flex px-3 px-md-3 px-lg-5"><div class="flex-auto min-width-0 width-fit mr-3"><div class=d-flex><div class="d-none d-md-block"><a class="avatar mr-2 flex-shrink-0" href=https://sanchitdilipjain.github.io/><img class=avatar-user src=https://sanchitdilipjain.github.io/images/avatar.png width=32 height=32></a></div><div class="d-flex flex-column"><h1 class="break-word f3 text-normal mb-md-0 mb-1"><span class=author><a href=https://sanchitdilipjain.github.io/>Sanchit Dilip Jain</a></span><span class=path-divider>/</span><strong class="css-truncate-target mr-1" style=max-width:410px><a href=https://sanchitdilipjain.github.io/post/aws-vpc-network-access/>Amazon VPC Network Access Analyzer 🔍</a></strong></h1><div class="note m-0">Created <relative-time datetime="Mon, 02 Jan 2023 12:00:00 +0000" class=no-wrap>Mon, 02 Jan 2023 12:00:00 +0000</relative-time>
<span class=file-info-divider></span>
Modified <relative-time datetime="Wed, 04 Dec 2024 15:21:06 +0000" class=no-wrap>Wed, 04 Dec 2024 15:21:06 +0000</relative-time></div></div></div></div></div></div></div><div class="container-lg px-3 new-discussion-timeline"><div class="repository-content gist-content"><div><div class="js-gist-file-update-container js-task-list-container file-box"><div id=file-pytest class="file my-2"><div id=post-header class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style=z-index:2><div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto"><div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0"><summary id=toc-toggle onclick=clickToc() class="btn btn-octicon m-0 mr-2 p-2"><svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered"><path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zM3 8A1 1 0 111 8a1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"/></svg></summary><details-menu class=SelectMenu id=toc-details style="display: none;"><div class="SelectMenu-modal rounded-3 mt-1" style=max-height:340px><div class="SelectMenu-list SelectMenu-list--borderless p-2" style=overscroll-behavior:contain id=toc-list></div></div></details-menu>931 Words
<span class=file-info-divider></span>
4 min</div></div></div><div class="Box-body px-5 pb-5" style=z-index:1><article class="markdown-body entry-content container-lg"><h2 id=amazon-vpc-network-access-analyzer>Amazon VPC Network Access Analyzer</h2><p><strong>Introduction</strong></p><ol><li><p>What is VPC Network Access Analyzer?</p><p>Network Access Analyzer is a feature that identifies unintended network access to your resources on AWS.</p><ul><li><strong>Understand, verify, and improve your network security posture:</strong> Network Access Analyzer helps you identify unintended network access relative to your security and compliance requirements, enabling you to improve your network security.</li><li><strong>Demonstrate compliance:</strong> You can use Network Access Analyzer to demonstrate that your network on AWS meets specific compliance requirements.</li><li><strong>Verify your network security posture:</strong> Network Access Analyzer lets you specify your network security requirements and identify potential network paths that do not meet your requirements.</li></ul></li><li><p>Why do you need a Network Access Analyzer?</p><ul><li>Problem statement: As organizations scale, it can be challenging to accomplish security and compliance objectives.</li><li>Tedious and ineffective network control validation: Customers have to manually check and audit their network designs and configurations, which do not scale.</li><li>Network controls become obsolete quickly: Customer environments are dynamic with evolving security mandates and network design changes, rendering all previous manual validation efforts obsolete.</li><li>Operations teams try to ensure a compliant environment that them under pressure and application teams in a position where they feel like they cannot move as fast as they want to.</li></ul></li></ol><p><strong>Demo</strong></p><p><strong>1. Set up Amazon VPC Network Access Analyzer and check Internet accessibility</strong></p><ul><li><p><strong>Objective:</strong> In this demo, we will use Amazon VPC Network Access Analyzer to identify resources that can be accessed from internet gateways and verify that they are limited to only those with a legitimate need to be accessible from the internet.</p></li><li><p>Below are the steps to enable Amazon VPC Network Access Analyzer</p><ul><li>Click on the search bar from the AWS Console in the top left corner. Type VPC in the services search bar. Select VPC from the list.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image1.png alt></p><ul><li>Click Network Access Analyzer on the left side of the screen, which can find under the Network Analysis section, and then click Get started.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2.png alt></p><ul><li>You will see four scopes that Amazon created.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image3.png alt></p><ul><li>To analyze all Ingress paths into your VPCs, click on the AWS-VPC-Ingress Network Access Scope ID. Click Analyze.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image4.png alt></p><ul><li>Scroll down to explore the findings once complete. Each finding shows a network path from the internet through the internet gateway to the resources in AWS(example: EC2 instances). It is where you would review each finding and flag/take action for findings/paths that were not intended to have internet access.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image5.png alt></p><ul><li>Select the first finding by clicking the radio button, and in the right pane, you can click on a resource to see additional information on a given resource.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image6.png alt></p></li><li><p>This completes the demo, and we successfully enabled Amazon VPC Network Access Analyzer and analyzed the ingress traffic paths from the internet gateway using a default Amazon network access scope.</p></li></ul><p><strong>2. Security controls (e.g., firewall/NAT-GW) in the path</strong></p><ul><li><p><strong>Objective:</strong> In this demo, we will create a custom network access scope to check if the instances in the VPCs route traffic via the Inspection VPC containing the Network Firewall.</p></li><li><p>Below are the steps to perform this demo</p><ul><li><p>Click on Network Access Analyzer on the left to get back to the main page. Click Create Network Access Scope in the upper right.</p><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_1.png alt></p></li><li><p>Select the Empty Template radio button and click Next.</p><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_2.png alt></p></li><li><p>Click Add match condition.</p><ul><li>Select Resource IDs under Resource selection and VPCs under Resource types for the Source. Select the Prod VPC and Dev VPC under Resource IDs as shown below.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_3.png alt></p><ul><li>Under Destination, select Resource types under Resource selection and select Internet Gateways. Select the Central Egress VPC IGW under Resource IDs as shown below.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_4.png alt></p></li><li><p>Click Next in the lower right, and on the Review and create screen, click Create Network Access Scope in the lower right.</p></li><li><p>Select the Network Access Scope and click Analyze in the upper right.</p></li><li><p>Once complete, you can see that there are findings. We are interested in looking at the &lsquo;TCP&rsquo; traffic to filter the results, as shown in the diagram.</p><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_5.png alt></p><ul><li>The Prod and Dev VPCs have a route through the network firewall (Inspection VPC). You may notice the destination address to quad zero.</li><li>Scroll down in the right pane to see the complete path ending at Central Egress VPC IGW. Notice the network firewall in the path as shown below.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_6.png alt></p></li><li><p>Now you can validate if compliance is being met. i.e., find any paths where there is no Network Firewall. We will duplicate and modify this network scope and analyze it.</p></li><li><p>Click on Actions in the right-hand corner and select Duplicate and modify.</p></li><li><p>Scroll down to Exclusion Conditions, click on Add exclusion condition and add AWS Network Firewalls in the Through section under Resource types as shown below.</p><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_7.png alt></p></li><li><p>Click on Duplicate and analyze Network Access Scope.</p><p><img src=https://sanchitdilipjain.github.io/images/vpc-network-analyzer/image2_8.png alt></p></li><li><p>You will see no findings detected, which is as expected. Because you have your Prod and Dev VPCs traffic going through the network firewall and the following compliance, no findings are detected.</p></li></ul></li><li><p>This completes the demo, and we successfully created a custom network access scope to see if the Prod and Dev VPCs route traffic to the internet via a Network Firewall. You then duplicated the network access scope and added an exclusion to see if any paths do not have a Network Firewall. If anyone is trying to evade a network firewall, you should be able to catch those findings here and take appropriate action.</p></li></ul><p><strong>Summary</strong></p><ul><li>In this blog, we learned how the new Amazon VPC Network Access Analyzer helps you identify network configurations that can lead to unintended network access.</li><li>Learn ways to improve your security posture while allowing you and your organization to be agile and flexible.</li></ul><p><strong>Resources</strong></p><ul><li>Visit this <a href=https://docs.aws.amazon.com/vpc/latest/network-access-analyzer/what-is-vaa.html>page</a> to find the latest documentation.</li></ul></article></div></div></div></div></div><div class=pagination-nav><div class="pagination-button next-post"><div>«&nbsp;</div><a class="pagination-link link-reverse" href=https://sanchitdilipjain.github.io/post/amazon-emr-serverless/>Amazon EMR Serverless - Overview 🔍</a></div><div class="pagination-button previous-post"><a class="pagination-link link-reverse" href=https://sanchitdilipjain.github.io/post/rewind-2022/>re:Wind 2022 📜&nbsp;</a><div>»</div></div></div></div></main></div><script type=application/javascript src=https://sanchitdilipjain.github.io/js/toc.js></script><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/toc.css><div class="footer container-xl width-full p-responsive"><div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light"><a aria-label=Homepage title=GitHub class="footer-octicon d-none d-lg-block mr-lg-4" href=https://sanchitdilipjain.github.io/><svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a><ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0"><li class="mr-3 mr-lg-0"></li></ul></div><div class="d-flex flex-justify-center pb-6"><span class="f6 text-gray-light"></span></div></div></body><script type=application/javascript src=https://sanchitdilipjain.github.io/js/github-style.js></script><script src=https://sanchitdilipjain.github.io/js/mark.es6.min.js></script></html>