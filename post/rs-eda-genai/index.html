<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width"><script type=application/javascript src=https://sanchitdilipjain.github.io/js/theme-mode.js></script><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/frameworks.min.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/github.min.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/github-style.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/light.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/dark.css><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/syntax.css><title>Redshift Data Analysis with Generative SQL 🔍 - Sanchit's blog</title>
<link rel=icon type=image/x-icon href=https://sanchitdilipjain.github.io/images/github.png><meta name=theme-color content="#1e2327"><meta name=description content="Never become so much of an expert that you stop gaining expertise. View life as a continuous learning experience."><meta name=robots content="noodp"><link rel=canonical href=https://sanchitdilipjain.github.io/post/rs-eda-genai/><meta name=twitter:card content="summary"><meta name=twitter:title content="Sanchit's Blog"><meta name=twitter:description content="Redshift Data Analysis with Generative SQL What is Amazon Redshift Serverless?
Amazon Redshift Serverless makes it convenient for you to run and scale analytics without having to provision and manage data warehouses. Amazon Redshift automatically provisions and scales data warehouse capacity to deliver fast performance for demanding and unpredictable workloads. You pay only for the capacity that you use. What is Amazon Q?
Amazon Q generates code, tests, debugs, and has multistep planning and reasoning capabilities that can transform and implement new code generated from developer requests. Amazon Q also makes it easier for employees to get answers to questions across business data such as company policies, product information, business results, code base, employees, and many other topics by connecting to enterprise data repositories to summarize the data logically, analyze trends, and engage in dialogue about the data. Demo
"><meta name=twitter:site content="https://sanchitdilipjain.github.io/"><meta name=twitter:creator content="Sanchit Jain"><meta name=twitter:image content="https://sanchitdilipjain.github.io//images/preview.png"><meta property="og:type" content="article"><meta property="og:title" content="Sanchit's Blog"><meta property="og:description" content="Never become so much of an expert that you stop gaining expertise. View life as a continuous learning experience."><meta property="og:url" content="https://sanchitdilipjain.github.io/"><meta property="og:site_name" content="Sanchit's Blog"><meta property="og:image" content="https://sanchitdilipjain.github.io//images/preview.png"><meta property="og:image:type" content="image/png"><meta name=thumbnail content="https://sanchitdilipjain.github.io//images/preview.png"><meta name=author content="Sanchit Jain"><meta property="article:published_time" content="2024-07-07 12:00:00 +0000 UTC"></head><body><style>.height-limitation{max-height:300px;overflow-y:scroll}.loader{border:4px solid #f3f3f3;border-bottom:4px solid var(--color-fg-muted);border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite;margin:0 auto}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style><div style=position:relative><header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on"><div class="Header-item mobile-none" style=margin-top:-4px;margin-bottom:-4px><a class=Header-link href=https://sanchitdilipjain.github.io/><svg class="octicon" height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div><div class="Header-item d-md-none"><button class="Header-link btn-link js-details-target" type=button onclick='document.querySelector("#header-search").style.display=document.querySelector("#header-search").style.display=="none"?"block":"none"'><svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button></div><div style=display:none id=header-search class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex"><div class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"><div class=position-relative><form target=_blank action=https://www.google.com/search accept-charset=UTF-8 method=get autocomplete=off><label class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center"><input type=text class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" name=q placeholder=Search autocomplete=off>
<input type=hidden name=q value=site:https://sanchitdilipjain.github.io/><div class="js-jump-to-suggestions-container jump-to-suggestions overflow-hidden position-absolute"><div id=search-progress class="d-none color-bg-primary no-underline p-2" role=progress aria-selected=false><div class=loader></div></div><ul id=jump-to-results role=listbox class="Box border-0 p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container js-active-navigation-container height-limitation"></ul></div></label></form></div></div></div><div class="Header-item Header-item--full flex-justify-center d-md-none position-relative"><a class=Header-link href=https://sanchitdilipjain.github.io/><svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div><div class=Header-item style=margin-right:0><a href=javascript:void(0) class="Header-link no-select" onclick=switchTheme()><svg style="fill:var(--color-profile-color-modes-toggle-moon)" class="no-select" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.52208 7.71754c3.05612.0 5.53362-2.47748 5.53362-5.5336C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961 9.95801 1.07727 10.3495.771159 10.6474.99992c1.4679 1.12724 2.4141 2.90007 2.4141 4.89391.0 3.40575-2.7609 6.16667-6.16665 6.16667-2.94151.0-5.40199-2.0595-6.018122-4.81523C.794841 6.87902 1.23668 6.65289 1.55321 6.85451 2.41106 7.40095 3.4296 7.71754 4.52208 7.71754z"/></svg></a></div></header></div><div><main><div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4"><div class=px-0><div class="mb-3 d-flex px-3 px-md-3 px-lg-5"><div class="flex-auto min-width-0 width-fit mr-3"><div class=d-flex><div class="d-none d-md-block"><a class="avatar mr-2 flex-shrink-0" href=https://sanchitdilipjain.github.io/><img class=avatar-user src=https://sanchitdilipjain.github.io/images/avatar.png width=32 height=32></a></div><div class="d-flex flex-column"><h1 class="break-word f3 text-normal mb-md-0 mb-1"><span class=author><a href=https://sanchitdilipjain.github.io/>Sanchit Dilip Jain</a></span><span class=path-divider>/</span><strong class="css-truncate-target mr-1" style=max-width:410px><a href=https://sanchitdilipjain.github.io/post/rs-eda-genai/>Redshift Data Analysis with Generative SQL 🔍</a></strong></h1><div class="note m-0">Created <relative-time datetime="Sun, 07 Jul 2024 12:00:00 +0000" class=no-wrap>Sun, 07 Jul 2024 12:00:00 +0000</relative-time>
<span class=file-info-divider></span>
Modified <relative-time datetime="Thu, 05 Dec 2024 16:56:15 +0000" class=no-wrap>Thu, 05 Dec 2024 16:56:15 +0000</relative-time></div></div></div></div></div></div></div><div class="container-lg px-3 new-discussion-timeline"><div class="repository-content gist-content"><div><div class="js-gist-file-update-container js-task-list-container file-box"><div id=file-pytest class="file my-2"><div id=post-header class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style=z-index:2><div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto"><div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0"><summary id=toc-toggle onclick=clickToc() class="btn btn-octicon m-0 mr-2 p-2"><svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered"><path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zM3 8A1 1 0 111 8a1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"/></svg></summary><details-menu class=SelectMenu id=toc-details style="display: none;"><div class="SelectMenu-modal rounded-3 mt-1" style=max-height:340px><div class="SelectMenu-list SelectMenu-list--borderless p-2" style=overscroll-behavior:contain id=toc-list></div></div></details-menu>729 Words
<span class=file-info-divider></span>
3 min</div></div></div><div class="Box-body px-5 pb-5" style=z-index:1><article class="markdown-body entry-content container-lg"><h2 id=redshift-data-analysis-with-generative-sql>Redshift Data Analysis with Generative SQL</h2><ol><li><p>What is Amazon Redshift Serverless?</p><ul><li>Amazon Redshift Serverless makes it convenient for you to run and scale analytics without having to provision and manage data warehouses.</li><li>Amazon Redshift automatically provisions and scales data warehouse capacity to deliver fast performance for demanding and unpredictable workloads. You pay only for the capacity that you use.</li></ul></li><li><p>What is Amazon Q?</p><ul><li>Amazon Q generates code, tests, debugs, and has multistep planning and reasoning capabilities that can transform and implement new code generated from developer requests.</li><li>Amazon Q also makes it easier for employees to get answers to questions across business data such as company policies, product information, business results, code base, employees, and many other topics by connecting to enterprise data repositories to summarize the data logically, analyze trends, and engage in dialogue about the data.</li></ul></li></ol><p><strong>Demo</strong></p><ul><li><p>In this blog, we&rsquo;ll explore data analysis using the Redshift Query Editor V2. We will set up a Redshift serverless cluster using AWS CFT, and our goal is to use Amazon Q to generate queries so we can focus on querying data.</p><ul><li><p><strong>Provisioning Redshift serverless cluster via AWS Cloudformation</strong></p><ul><li><p>Download the Cloudformation from this <a href=https://sanchitdilipjain.github.io/images/rs-eda-genai/redshift-cft.yml>URL</a> and upload at <a href=https://console.aws.amazon.com/cloudformation/>AWS Cloudformation console</a></p></li><li><p>The CloudFormation stack will create the necessary resources required for the demo. Check the CloudFormation console and wait for the status CREATE_COMPLETE as shown below</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image1.png alt></p></li></ul></li><li><p>Download a <strong><a href=https://sanchitdilipjain.github.io/images/rs-eda-genai/clickstream_data.csv>sample dataset</a></strong> from here and upload to an existing Amazon S3 bucket in the same account and same region of Redshift serverless cluster</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image2.png alt></p></li><li><p><strong>Setup Redshift Query Editor V2</strong></p><ul><li><p>Navigate to the <a href="https://us-east-1.console.aws.amazon.com/sqlworkbench/home?region=us-east-1#/client">Redshift Query Editor V2</a></p></li><li><p>Press the Configure account button to open the Query Editor.</p></li><li><p>In the panel area click on Severless: workgroup to open the connection screen</p></li><li><p>Click Create connection to connect to the database.</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image3.png alt></p></li></ul></li><li><p><strong>Load Your Data into Redshift Query Editor V2</strong></p><ul><li><p>Click the Load Data button to initiate the data loading process.</p></li><li><p>Choose the Browse S3 button, select the bucket (same bucket you uploaded data in Step 2), and then pick the <strong>.clickstream_data.csv</strong>. file. This CSV contains the dataset for our analysis.</p></li><li><p>After selecting the file, click Choose, and then Next to proceed.</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image4.png alt></p></li><li><p>Choose to Load new table in the following screen.</p></li><li><p>In the Schema field, select public. Name your new table: <strong>clickstream_data</strong> works well.</p></li><li><p>For the IAM role, choose the pre-set <strong>RedshiftCopyUnload Role</strong>.</p></li><li><p>Complete the setup by clicking Create table and then the Load Data button.</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image5.png alt></p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image6.png alt></p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image7.png alt></p></li></ul></li><li><p><strong>Using Generative SQL for Queries</strong></p><ul><li><p>The clickstream data provides a detailed record of user interactions on a fictional website, capturing information such as IP addresses, event timestamps, device types, types of events (like visiting the home page or product catalog), product categories, and unique user IDs. In this section you will use Generative SQL with Amazon Q to understand the data.</p><ul><li><p>Click the Plus sign to open a new Notebook. This will be your playground for data queries.</p></li><li><p>Next, click on the Generative SQL button then Settings in the popup</p></li><li><p>Click the Generative SQL checkbox, then click Save</p></li><li><p>Now click Generative SQL to bring up the chat window. Here&rsquo;s where you&rsquo;ll ask your data questions.</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image8.png alt></p></li><li><p>Start with a simple query to get a feel for the dataset. Type in: <strong>Show me all the product types in clickstream_data</strong>. Then, click Add to notebook and hit the Run button in the cell. This query gives you a snapshot of the different products in your dataset.</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image9.png alt></p></li><li><p>Ready to dive deeper? Try a more targeted query. <strong>Ask: Show me the users who engaged the most with &ldquo;video games&rdquo;</strong>. This will help you identify which users are most interested in video games, offering a glimpse into user preferences and behaviors.</p><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image10.png alt></p></li><li><p>Let&rsquo;s run few more queries</p><ul><li>Show me the most popular device types</li></ul><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image11.png alt></p><ul><li>Show me the top 5 users with the device type of tablet</li></ul><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image12.png alt></p><ul><li>Show me the most engaged users with a device type of mobile that had an event_type of the order_checkout.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image13.png alt></p><ul><li>Show me the top products viewed by users on mobile devices.</li></ul><p><img src=https://sanchitdilipjain.github.io/images/rs-eda-genai/image14.png alt></p></li></ul></li></ul></li></ul></li></ul><p><strong>Conclusion</strong></p><ul><li>That wraps up our demo through data analysis with Amazon Q and Generative SQL. We&rsquo;ve seen how these powerful tools can transform the way you interact with and understand your data.</li><li>Remember, while next generation developer tools like Amazon Q can significantly boost your productivity, it&rsquo;s not infallible. Keep an eye out for areas where Q might not get things quite right and be ready to step in and guide the process.</li></ul></article></div></div></div></div></div><div class=pagination-nav><div class="pagination-button next-post"><div>«&nbsp;</div><a class="pagination-link link-reverse" href=https://sanchitdilipjain.github.io/post/secure-coding-with-amazon-q/>Securing Your Code With Amazon Q Developer 🔍</a></div><div class="pagination-button previous-post"><a class="pagination-link link-reverse" href=https://sanchitdilipjain.github.io/post/debug-lambda-amazon-q/>Debugging Lambda Functions with Amazon Q 🔍&nbsp;</a><div>»</div></div></div></div></main></div><script type=application/javascript src=https://sanchitdilipjain.github.io/js/toc.js></script><link rel=stylesheet href=https://sanchitdilipjain.github.io/css/toc.css><div class="footer container-xl width-full p-responsive"><div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light"><a aria-label=Homepage title=GitHub class="footer-octicon d-none d-lg-block mr-lg-4" href=https://sanchitdilipjain.github.io/><svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a><ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0"><li class="mr-3 mr-lg-0"></li></ul></div><div class="d-flex flex-justify-center pb-6"><span class="f6 text-gray-light"></span></div></div></body><script type=application/javascript src=https://sanchitdilipjain.github.io/js/github-style.js></script><script src=https://sanchitdilipjain.github.io/js/mark.es6.min.js></script></html>